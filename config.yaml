# SMTP 隧道配置
# 复制此文件并根据您的设置进行自定义

# ============================================================================
# 服务端配置（用于 server.py）
# ============================================================================
server:
  # 监听地址（0.0.0.0 表示所有网络接口）
  host: "0.0.0.0"

  # SMTP 提交端口（587 是标准端口）
  port: 587

  # 在 SMTP 问候中通告的主机名
  # 使用与服务器 DNS 匹配的逼真主机名
  hostname: "mail.example.com"

  # TLS 证书和密钥文件
  # 使用以下命令生成: python generate_certs.py --hostname mail.example.com
  cert_file: "server.crt"
  key_file: "server.key"

  # 用户配置文件
  # 包含用户密钥、IP 白名单和日志设置
  users_file: "users.yaml"

  # 全局日志设置（可按用户覆盖）
  log_users: true

# ============================================================================
# 客户端配置（用于 client.py）
# 此部分在生成客户端包时使用
# ============================================================================
client:
  # 隧道服务器域名（证书验证需要完全限定域名）
  # 使用域名而不是 IP 地址 - 有关免费 DNS 选项请参阅 README
  server_host: "mail.example.com"

  # 隧道服务器端口
  server_port: 587

  # 本地 SOCKS5 代理端口
  socks_port: 1080

  # 本地 SOCKS5 绑定地址（127.0.0.1 = 仅限本地）
  socks_host: "127.0.0.1"

  # 用户名和密钥在生成的客户端配置中按用户设置
  # username: "set-by-adduser"
  # secret: "set-by-adduser"

  # 用于服务器验证的 CA 证书（出于安全考虑建议使用）
  ca_cert: "ca.crt"

# ============================================================================
# 隐蔽配置（DPI 规避）- 可选
# ============================================================================
stealth:
  # 消息之间的随机延迟范围（毫秒）
  min_delay_ms: 50
  max_delay_ms: 500

  # 将消息填充到这些大小（字节）
  pad_to_sizes:
    - 4096
    - 8192
    - 16384

  # 发送虚假（空）消息的概率
  dummy_message_probability: 0.1
