# ============================================================================
# SMTP Tunnel Proxy - 备份配置文件
# ============================================================================
# 此文件用于配置备份脚本的行为
# 使用方法: ./backup.sh --config .backup_config
# ============================================================================

# ============================================================================
# 基本配置
# ============================================================================

# 备份目录路径
# 默认: ${WORKSPACE_DIR}/backups
BACKUP_DIR="/home/pps/code/smtp-tunnel-proxy/smtp-tunnel-proxy/backups"

# 备份文件前缀
# 默认: smtp-tunnel-backup
BACKUP_PREFIX="smtp-tunnel-backup"

# 备份保留天数
# 超过此天数的备份将被自动清理
# 默认: 30
RETENTION_DAYS=30

# ============================================================================
# 压缩配置
# ============================================================================

# 压缩级别 (1-9)
# 1 = 最快压缩，9 = 最高压缩率
# 默认: 6
COMPRESSION_LEVEL=6

# ============================================================================
# 加密配置
# ============================================================================

# 是否启用加密
# true = 启用，false = 禁用
# 默认: false
ENCRYPT_BACKUP=false

# 加密密码文件路径
# 如果启用加密，需要创建此文件并设置密码
# 创建方法: echo 'your-password' > .backup_password
# 设置权限: chmod 600 .backup_password
ENCRYPT_PASSWORD_FILE="/home/pps/code/smtp-tunnel-proxy/smtp-tunnel-proxy/.backup_password"

# 加密算法
# 目前支持: aes-256-cbc (默认)
ENCRYPT_ALGORITHM="aes-256-cbc"

# ============================================================================
# rsync 配置
# ============================================================================

# rsync 选项
# -a: 归档模式，保留文件属性
# -v: 详细输出
# -z: 压缩传输
# --progress: 显示进度
# --delete: 删除目标中源不存在的文件
RSYNC_OPTIONS="-avz --progress --delete"

# ============================================================================
# 日志配置
# ============================================================================

# 日志文件路径
# 默认: ${BACKUP_DIR}/backup.log
LOG_FILE="/home/pps/code/smtp-tunnel-proxy/smtp-tunnel-proxy/backups/backup.log"

# 日志级别
# 可选: INFO, WARNING, ERROR
LOG_LEVEL="INFO"

# ============================================================================
# 备份策略配置
# ============================================================================

# 全量备份周期 (天数)
# 每隔多少天执行一次全量备份
FULL_BACKUP_INTERVAL=7

# 增量备份周期 (天数)
# 每隔多少天执行一次增量备份
INCREMENTAL_BACKUP_INTERVAL=1

# ============================================================================
# 备份排除规则
# ============================================================================

# 备份排除文件路径
# 默认: ${WORKSPACE_DIR}/.backup_exclude
EXCLUDE_FILE="/home/pps/code/smtp-tunnel-proxy/smtp-tunnel-proxy/.backup_exclude"

# ============================================================================
# 通知配置 (可选)
# ============================================================================

# 备份成功时发送通知
# 需要配置邮件通知或 webhook
NOTIFY_ON_SUCCESS=false

# 备份失败时发送通知
NOTIFY_ON_FAILURE=true

# 通知邮件地址 (如果使用邮件通知)
NOTIFY_EMAIL=""

# Webhook URL (如果使用 webhook 通知)
NOTIFY_WEBHOOK=""

# ============================================================================
# 存储配置 (可选)
# ============================================================================

# 是否将备份同步到远程存储
# 可选: none, s3, ftp, rsync
REMOTE_STORAGE="none"

# S3 配置 (如果使用 S3)
S3_BUCKET=""
S3_ACCESS_KEY=""
S3_SECRET_KEY=""
S3_REGION=""

# FTP 配置 (如果使用 FTP)
FTP_HOST=""
FTP_USER=""
FTP_PASSWORD=""
FTP_PATH=""

# 远程 rsync 配置 (如果使用 rsync)
REMOTE_RSYNC_HOST=""
REMOTE_RSYNC_PATH=""
REMOTE_RSYNC_USER=""
REMOTE_RSYNC_KEY=""

# ============================================================================
# 性能配置
# ============================================================================

# 并行传输数量
# 默认: 1
PARALLEL_TRANSFERS=1

# 带宽限制 (KB/s)
# 0 = 无限制
BANDWIDTH_LIMIT=0

# ============================================================================
# 安全配置
# ============================================================================

# 备份文件权限
# 默认: 600 (仅所有者可读写)
BACKUP_FILE_PERMISSIONS="600"

# 备份目录权限
# 默认: 700 (仅所有者可访问)
BACKUP_DIR_PERMISSIONS="700"

# ============================================================================
# 验证配置
# ============================================================================

# 备份后自动验证
# true = 验证备份完整性，false = 跳过验证
VERIFY_AFTER_BACKUP=true

# 恢复前自动验证
# true = 验证备份完整性，false = 跳过验证
VERIFY_BEFORE_RESTORE=true
